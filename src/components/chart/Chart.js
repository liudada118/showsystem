import React from 'react'
import './chart.scss'


const chartArr = [
  [3, 5],
  [2, 7], [4, 6], [6, 2], [3, 5], [6, 4], [0, 9], [6, 4], [6, 2], [4, 2], [2, 4], [4, 2], [2, 7], [1, 9]
]

export function Chart1() {
  return (
    <div className='chart'>
      {chartArr.map((a, indexs) => {
        return (
          <div className='chartItems'>
            {a.map((b, index) => {
              return <div className='chartItem' style={{ height: `${b * 5}px`, backgroundColor: index === 0 ? '#01F1E3' : '#991BFA', marginBottom: index === 0 ? 5 : 0 }}></div>
            })}
          </div>
        )
      })}
    </div>
  )
}

export function Chart2() {
  return (
    <div className='chart'>
      <div className='chartLeft'></div>
      <div className='chartRight'></div>
    </div>
  )
}


export class CanvasDemo extends React.Component {
  constructor(props) {
    super(props)
    this.initCanvas = this.initCanvas.bind(this)
  }
  initCanvas() {
    const {
      x0,//原点坐标
      y0,
      r,// 半径
      lineWidth, // 画笔宽度
      strokeStyle, //画笔颜色
      LinearGradientColor1, //起始渐变颜色
      LinearGradientColor2, //结束渐变颜色
      Percentage,// 进度百分比
    } = this.props
    const divWidth = document.querySelector('.canvasContent').getBoundingClientRect().width
    // console.log(divWidth)
    let ele = document.getElementById("time_graph_canvas")
    let context = ele.getContext("2d");
    //创建背景圆
    var x = 20; // 圆角矩形左上角横坐标
    var y = 20; // 圆角矩形左上角纵坐标
    var width = 250; // 圆角矩形的宽度
    var height = 250; // 圆角矩形的高度
    var radius = (divWidth - 40) / 2; // 圆角的半径
    context.width = divWidth
    // 开始创建新路径
    const linesWidth = 10
    context.lineWidth = `${linesWidth}`;
    context.beginPath();
    // 绘制左上角圆角
    context.arc(x + radius, y + radius, radius, Math.PI, Math.PI * 8 / 6);
    // 绘制顶边路径
    context.strokeStyle = '#991BFA';
    context.stroke();



    context.lineWidth = `${linesWidth}`;
    context.beginPath();
    // 绘制左上角圆角
    context.arc(x + radius, y + radius, radius, Math.PI * 17 / 12, Math.PI * 2);
    // 绘制右上角圆角

    // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // context.closePath();
    // 设置绘制的颜色
    context.strokeStyle = '#01F1E3';
    context.stroke();



    context.beginPath();
    context.lineWidth = `${linesWidth / 2}`;
    // 绘制左上角圆角
    context.arc(x + linesWidth / 2 + radius * 2 - 10 + 5, y + radius, 2.5, 0, Math.PI);
    // 绘制右上角圆角

    // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // context.closePath();
    // 设置绘制的颜色
    context.strokeStyle = '#01F1E3';
    context.stroke();

    context.beginPath();
    // 绘制左上角圆角
    context.arc(x + linesWidth / 2 - 10 + 5, y + radius, 2.5, 0, Math.PI);
    // 绘制右上角圆角

    // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // context.closePath();
    // 设置绘制的颜色
    context.strokeStyle = '#991BFA';
    context.stroke();


    context.beginPath();
    // 绘制左上角圆角
    context.arc(x + radius * (1 - Math.sin(Math.PI / 6)), y + radius * (1 - Math.cos(Math.PI / 6)), 2.5, Math.PI * 4 / 3, Math.PI / 3);
    // 绘制右上角圆角

    // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // context.closePath();
    // 设置绘制的颜色
    context.strokeStyle = '#991BFA';
    context.stroke();

    context.beginPath();
    // 绘制左上角圆角
    context.arc(x + radius * (1 + Math.cos((Math.PI * 17 / 12))), y + radius * (1 - Math.sin((Math.PI * 5 / 12))), 2.5, Math.PI + Math.PI * 17 / 12, Math.PI * 17 / 12);
    // 绘制右上角圆角

    // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // context.closePath();
    // 设置绘制的颜色
    context.strokeStyle = '#01F1E3';
    context.stroke();


  }

  initCanvas1() {
    const {
      x0,//原点坐标
      y0,
      r,// 半径
      lineWidth, // 画笔宽度
      strokeStyle, //画笔颜色
      LinearGradientColor1, //起始渐变颜色
      LinearGradientColor2, //结束渐变颜色
      Percentage,// 进度百分比
    } = this.props
    const divWidth = document.querySelector('.canvasContent').getBoundingClientRect().width
    // console.log(divWidth)
    let ele = document.getElementById("time_graph_canvas")
    let context = ele.getContext("2d");
    //创建背景圆
    var x = 20; // 圆角矩形左上角横坐标
    var y = 20; // 圆角矩形左上角纵坐标
    var width = 250; // 圆角矩形的宽度
    var height = 250; // 圆角矩形的高度
    var radius = (divWidth - 40) / 2; // 圆角的半径
    context.width = divWidth
    // 开始创建新路径
    const linesWidth = 10
    context.save();
    context.translate(x + radius, y + radius)
    context.rotate(0 / 6 * Math.PI);
    context.lineWidth = `${linesWidth}`;
    context.beginPath();
    context.arc(x + radius, y + radius, radius, Math.PI * 13 / 24, Math.PI * 35 / 24);
    context.strokeStyle = '#991BFA';
    context.stroke();

    context.lineWidth = `${linesWidth}`;
    context.beginPath();
    context.arc(x + radius, y + radius, radius, Math.PI * 37 / 24, Math.PI * 11 / 24);
    context.strokeStyle = '#01F1E3';
    context.stroke();



    context.lineWidth = `${linesWidth / 2}`;
    context.beginPath();
    context.arc(x + linesWidth / 2 - 10 + 5, y + radius, 2.5, 0, Math.PI);
    context.strokeStyle = '#991BFA';
    context.stroke();

    context.beginPath();
    context.arc(x + radius * (1 - Math.sin(Math.PI * 1 / 24)), y + radius * (1 - Math.cos(Math.PI * 1 / 24)), 2.5, Math.PI * 35 / 24, Math.PI * 11 / 24);
    context.strokeStyle = '#991BFA';
    context.stroke();


    context.beginPath();
    // 绘制左上角圆角
    context.arc(x + radius * (1 + Math.sin(Math.PI * 1 / 24)), y + radius * (1 - Math.cos(Math.PI * 1 / 24)), 2.5, Math.PI * 13 / 24, Math.PI * 37 / 24);
    // 绘制右上角圆角

    // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // context.closePath();
    // 设置绘制的颜色
    context.strokeStyle = '#01F1E3';
    context.stroke();

    context.clearRect(0, 115, divWidth, 260);


    context.beginPath();
    context.lineWidth = `${linesWidth / 2}`;
    // 绘制左上角圆角
    context.arc(x + linesWidth / 2 + radius * 2 - 10 + 5, y + radius, 2.5, 0, Math.PI);
    // 绘制右上角圆角

    // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // context.closePath();
    // 设置绘制的颜色
    context.strokeStyle = '#01F1E3';
    context.stroke();

    context.beginPath();
    // 绘制左上角圆角
    context.arc(x + linesWidth / 2 - 10 + 5, y + radius, 2.5, 0, Math.PI);
    // 绘制右上角圆角

    // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // context.closePath();
    // 设置绘制的颜色
    context.strokeStyle = '#991BFA';
    context.stroke();

    // context.beginPath();
    // // 绘制左上角圆角
    // context.arc(x + radius * (1 + Math.cos((Math.PI * 17 / 12))), y + radius * (1 - Math.sin((Math.PI * 5 / 12))), 2.5, Math.PI + Math.PI * 17 / 12, Math.PI * 17 / 12);
    // // 绘制右上角圆角

    // // 闭合路径 也可使用 context.lineTo(x, y + radius);
    // // context.closePath();
    // // 设置绘制的颜色
    // context.strokeStyle = '#01F1E3';
    // context.stroke();


  }

  initCanvasrotate(rotate) {
    console.log('canvas')
    const {
      x0,//原点坐标
      y0,
      r,// 半径
      lineWidth, // 画笔宽度
      strokeStyle, //画笔颜色
      LinearGradientColor1, //起始渐变颜色
      LinearGradientColor2, //结束渐变颜色
      Percentage,// 进度百分比
    } = this.props
    const divWidth = document.querySelector('.canvasContent').getBoundingClientRect().width
    // console.log(divWidth)
    let ele = document.getElementById("time_graph_canvas")
    let context = ele.getContext("2d");
    //创建背景圆
    var x = 20; // 圆角矩形左上角横坐标
    var y = 20; // 圆角矩形左上角纵坐标
    var width = 250; // 圆角矩形的宽度
    var height = 250; // 圆角矩形的高度
    var radius = (divWidth - 40) / 2; // 圆角的半径
    context.width = divWidth
    // 开始创建新路径
    const linesWidth = 10
    context.save();
    context.translate(x + radius, y + radius)
    context.rotate(rotate * Math.PI);

    // 左右两半圆
    context.lineWidth = `${linesWidth}`;
    context.beginPath();
    context.arc(0, 0, radius, Math.PI * 13 / 24, Math.PI * 35 / 24);
    context.strokeStyle = '#991BFA';
    context.stroke();

    context.lineWidth = `${linesWidth}`;
    context.beginPath();
    context.arc(0, 0, radius, Math.PI * 37 / 24, Math.PI * 11 / 24);
    context.strokeStyle = '#01F1E3';
    context.stroke();

    // 左右两半圆的圆角
    context.lineWidth = `${linesWidth / 2}`;
    context.beginPath();
    context.arc(radius * (0 - Math.sin(Math.PI * 1 / 24)), radius * (0 - Math.cos(Math.PI * 1 / 24)), 2.5, Math.PI * 35 / 24, Math.PI * 11 / 24);
    context.strokeStyle = '#991BFA';
    context.stroke();

    context.beginPath();
    context.arc(radius * (0 + Math.sin(Math.PI * 1 / 24)), radius * (0 - Math.cos(Math.PI * 1 / 24)), 2.5, Math.PI * 13 / 24, Math.PI * 37 / 24);
    context.strokeStyle = '#01F1E3';
    context.stroke();


    // 将下半圆清除
    context.rotate(-rotate * Math.PI);
    context.clearRect(-radius - linesWidth, 0, 260, 260);

    // 左右半圆下半的圆角
    context.beginPath();
    context.lineWidth = `${linesWidth / 2}`;
    context.arc(radius , 0, 2.5, 0, Math.PI);
    context.strokeStyle = '#01F1E3';
    context.stroke();

    context.beginPath();
    context.arc(-radius, 0, 2.5, 0, Math.PI);
    context.strokeStyle = '#991BFA';
    context.stroke();

  }

  componentDidMount() {
    this.initCanvasrotate(-0.5/3)
  }
  componentDidUpdate() {
    this.initCanvas()
  }
  static defaultProps = {
    canvaswidth: 200,// 画布宽度
    canvasheight: 130,// 画布高度
    x0: 80,
    y0: 80,
    r: 72,
    lineWidth: 16,
    strokeStyle: 'rgba(248, 248, 248, 1)',
    LinearGradientColor1: '#3EECED',
    LinearGradientColor2: '#499BE6'
  }
  render() {
    const { width, height, canvaswidth, canvasheight } = this.props
    return (
      <div style={{ width: width, height: height, padding: 10 }}>
        <div className='canvasContent'>

          <canvas id="time_graph_canvas" height={canvasheight}></canvas>
          <div style={{ position: 'absolute', left: '50%', top: '70%', transform: 'translate(-50% , -50%)', display: 'flex', flexDirection: "column", justifyContent: 'center', alignItems: 'center' }}>
            <div>Total Press</div>
            <h2 style={{ color: '#fff' }}>4390</h2>
          </div>

        </div>
        <div className='customInfo'>
          <div className='chartCircleContentCloumn'>
            <div className='chartCircleContent'>
              <div className="chartCircle"></div>
              <div>left</div>
            </div>
            <div>1405+32%</div>
          </div>
          <div className='chartCircleContentCloumn'>
            <div className='chartCircleContent'>
              <div className="chartCircleright"></div>
              <div>right</div>
            </div>
            <div>2985+68%</div>
          </div>
        </div>
      </div>
    )
  }
}
